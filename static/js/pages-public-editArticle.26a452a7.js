(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-editArticle"],{3725:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.editor_toolbox[data-v-7ef9a1bc]{position:fixed;top:0;width:100%;height:%?100?%;background-color:#ededed;display:flex;align-items:center;padding:5px;box-sizing:border-box;border-bottom:1px solid #000;line-height:1.6}@font-face{font-family:iconfont;src:url("data:application/x-font-woff2;charset=utf-8;base64,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") format("woff2")}.iconfont[data-v-7ef9a1bc]{flex:1;text-align:center;font-family:iconfont!important;font-size:22px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-undo[data-v-7ef9a1bc]:before{content:"\\e607"}.icon-redo[data-v-7ef9a1bc]:before{content:"\\e606"}.icon-img[data-v-7ef9a1bc]:before{content:"\\e6e2"}.icon-video[data-v-7ef9a1bc]:before{content:"\\e798"}.icon-link[data-v-7ef9a1bc]:before{content:"\\e60d"}.icon-text[data-v-7ef9a1bc]:before{content:"\\e6ce"}.icon-clear[data-v-7ef9a1bc]:before{content:"\\e637"}.icon-save[data-v-7ef9a1bc]:before{content:"\\e501"}\n\n/* 模态框 */.modal[data-v-7ef9a1bc]{position:fixed;top:50%;left:16px;right:16px;background-color:#fff;border-radius:12px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.modal_title[data-v-7ef9a1bc]{padding:32px 24px 16px;font-size:17px;font-weight:700;text-align:center}.modal_input[data-v-7ef9a1bc]{display:block;padding:5px;margin:0 24px 32px 24px;font-size:14px;border:1px solid #dfe2e5}.modal_foot[data-v-7ef9a1bc]{display:flex;line-height:56px;font-weight:700;border-top:1px solid rgba(0,0,0,.1)}.modal_button[data-v-7ef9a1bc]{flex:1;text-align:center}\n\n/* 蒙版 */.mask[data-v-7ef9a1bc]{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000;opacity:.5}',""]),t.exports=e},"46e8":function(t,e,i){"use strict";i.r(e);var a=i("c6c1"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"51aa":function(t,e,i){var a=i("3725");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("2a16febc",a,!0,{sourceMap:!1,shadowMode:!1})},6867:function(t,e,i){"use strict";var a=i("51aa"),n=i.n(a);n.a},a3ab:function(t,e,i){"use strict";i.r(e);var a=i("d71e"),n=i("46e8");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("6867");var l=i("f0c5"),s=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"7ef9a1bc",null,!1,a["a"],void 0);e["default"]=s.exports},a8ff:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAwZJREFUeF7tm72LE0EUwN+bsASr86PSSji748RGtBG8RjkDuzMb0pwWyomVihaCjfjRCIKCHwiinifcVQuzmzRq5XViYWNhZZG/wMYyZJ/McQv7kTW7OU4vM7NVkn3zZt5v3puZN7wgpJ5Op3NkOBwuxnF8IP27hp/7juP0giD4hWnjOOdvEHFZQ4NHmbQRhuFCBoAQggwxftNMIsoC8H3/FRFdMQRC0QOMXwMMmfmMmZk1wAIwkID1AAMn3a4BaQI2BGwIGE7AhoDhDgAZDzA+FzA+GzT+PsD4GyHj1wATdwR7DjBx1m0ylCJgQ8CGgOEEbAgY7gDZbNBEGDYE8rPOOb8IAIen2Rscx1kLguDnKBuEEOcRcUZK+VK9z9cHPEPEa9NsfDL2OI7nut3uj1z9w0dEPLv123oYhhe0rQ8govtRFN1LAHDOTyPi5zSQQn2ATvcBRHQuiqIPtQDoch+AiJ/CMPySc//xHqBD7JfZUCkELACNCVgPqLILTIMDtNvtOSJalVIerzNeLTxAneIA4B0AOGEY1jrGTz0AIcQjALiVzLoxAFzXPdRoNNSsn0m7vBEAOOeLiPgWAA7m4117AEKI2wDwsGyh0xZAp9PZMxgMVNX60t9W+QkAFDLdQjKkOnRd9yhjbH+dLaaqbBzH33q93u8yec/zTjDGXgPA/DidavDjZJL3jDGPiG7k5QsAhBBPAOBmVcUTyPWJ6EUURY/zbT3Pm2eMfZ9A58RNRgH4F/8X2CxTz4/6fxRnjAKwBgDqsLFjT/6iIunI9/0lIlrfsY5zihHxq5TyZP5KbC9j7C4RHduJgRDR+yiKVst0CyFU/F+u2PdGRbmCGCL2pZSX1Itax8lJO6zTTghxHQCejmtTdxco07frAKiB+r6/QETKG2bLBq41AGV0q9Xa12w2V4iIj4KgPYDEaM75A0S8k4dgDABluBDCB4AVAJhJQBgFQBnNOZ9FRJUVnlLfjQOQOi88J6KrxgLY2iWWpZQqTd72syu3wW1bVUOBBVADlpaifwACKmngtKu0BgAAAABJRU5ErkJggg=="},c6c1:function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c975"),i("ac1f"),i("5319"),i("14d9"),i("d3b7"),i("baa5");var n=a(i("9df6")),o=a(i("110b")),l=a(i("7b4f")),s=a(i("052c")),c=[],r={data:function(){return{content:"",modal:null,editable:!0,returnValue:!1,fileKey:"",initialFlag:!1,shuaxinFlag:!1,projectId:"",secretKey:""}},components:{mpHtml:n.default},computed:{resourceUrltwo:function(){return"apply/xiaosikaifa/user/"+this.secretKey+"/"+this.projectId+"/resource/"},contentChuLi:function(){var e,i,a=this.content+"";while(-1!=a.indexOf("https://xskf_resStart:"))e=a.substring(a.indexOf("https://xskf_resStart:"),a.indexOf("_xskf_resEnd")+12),i=l.default.getResource(this.resourceUrltwo+e.replace("https://",""),this.secretKey,""),a=a.replace(e,i),c.push({old:e,new:i});return t.log(2,c),a}},onLoad:function(t){c=[],this.fileKey=t.fileKey,this.secretKey=t.secretKey,this.projectId=t.projectId;var e=this;"null"==t.articleKey?o.default.get("editArticle").then((function(t){t&&(t=t.replace(/#xskf_qjbl#/g,"$").replace(/#xskf_zyhs#/g,"@").replace(/#system_xskf_/g,"#xskf_"),e.content=t),setTimeout((function(){e.initialFlag=!0,setTimeout((function(){e.initialLogin()}),200)}),100)})):(uni.showLoading({title:"加载中..."}),l.default.request(s.default.networkMainLoginUrl,{cmd:"getFileValue",secretKey:t.secretKey,excute:{bucketName:s.default.ossBucketSystemName,key:t.articleKey},safety:t.secretKey},"post").then((function(i){if(uni.hideLoading(),200==i.statusCode){var a=i.data.XSValue;a=a.replace(/#xskf_qjbl#/g,"$").replace(/#xskf_zyhs#/g,"@").replace(/#system_xskf_/g,"#xskf_"),e.content=a,setTimeout((function(){e.initialFlag=!0,setTimeout((function(){e.initialLogin()}),200)}),100)}else 0!=t.cmd&&"0"!=t.cmd&&uni.showModal({title:"获取失败",showCancel:!1,content:"未成功获取文章内容，请退出重试"})}))),setTimeout((function(){uni.setNavigationBarColor({frontColor:getApp().globalData.subjectApplyColor,backgroundColor:getApp().globalData.subjectApplyBackgroundColor}),uni.setTabBarStyle({backgroundColor:getApp().globalData.subjectApplyBackgroundColor})}),50)},onUnload:function(){this.$eventHub.$emit("editArticle",this.returnValue)},onBackPress:function(t){if("backbutton"==t.from){return uni.showModal({title:"您确定要退出编辑吗？",content:"",confirmText:"确定退出",cancelText:"点错了",success:function(t){t.confirm&&uni.navigateBack({delta:1})}}),!0}},onReady:function(){},methods:{quxiao:function(){this.$refs.article["insertHtml"]("")},initialLogin:function(){var e=this,i=this;this.$refs.article.getSrc=function(a,n){return new Promise((function(o,s){if("img"==a)uni.showActionSheet({itemList:["上传图片","网络地址"],success:function(a){0==a.tapIndex?uni.chooseImage({count:1,success:function(e){if(e.tempFiles[0].size>5242880)uni.showToast({title:"上传的图片大小不能超过5MB",icon:"none"});else{var a,n,s=e.tempFiles[0].path.substring(e.tempFiles[0].path.lastIndexOf("/")+1);-1!=i.fileKey.indexOf("/dataBase/")?(a=i.fileKey.substring(0,i.fileKey.indexOf("/dataBase/")),n=a+"/resource/"+s):(a=i.fileKey,n=a+s),uni.showLoading({title:"上传中...",mask:!0}),l.default.uploadFile({key:n,"x-oss-object-acl":"private"},e.tempFiles[0].path).then((function(e){if(uni.hideLoading(),e){t.log(1);var a="https://xskf_resStart:"+s+"_xskf_resEnd";t.log(2);var n=l.default.getResource(i.resourceUrltwo+a.replace("https://",""),i.secretKey,"");t.log(3),c.push({old:a,new:n}),t.log(n),o(n)}}))}},fail:s}):(e.callback={resolve:o,reject:s},e.$set(e,"modal",{title:"图片链接",value:n}))}});else if("video"==a)uni.showActionSheet({itemList:["上传视频","网络地址"],success:function(t){0==t.tapIndex?uni.chooseVideo({count:1,compressed:!1,sourceType:["camera","album"],success:function(t){if(t.size>314572800)uni.showToast({title:"上传的视频大小不能超过300MB",icon:"none"});else{var e,a,n=t.tempFilePath.substring(t.tempFilePath.lastIndexOf("/")+1);-1!=i.fileKey.indexOf("/dataBase/")?(e=i.fileKey.substring(0,i.fileKey.indexOf("/dataBase/")),a=e+"/resource/"+n):(e=i.fileKey,a=e+n),uni.showLoading({title:"上传中...",mask:!0}),l.default.uploadFile({key:a,"x-oss-object-acl":"private"},t.tempFilePath).then((function(t){uni.hideLoading(),t&&o("https://xskf_resStart:"+n+"_xskf_resEnd")}))}},fail:s}):(e.callback={resolve:o,reject:s},e.$set(e,"modal",{title:"视频链接",value:n}))}});else{var r;e.callback={resolve:o,reject:s},"video"==a?r="视频链接":"audio"==a?r="音频链接":"link"==a&&(r="链接地址"),e.$set(e,"modal",{title:r,value:n})}}))}},modalInput:function(t){this.value=t.detail.value},modalConfirm:function(){void 0!=this.value&&-1!=this.value.indexOf("http")?(this.callback.resolve(this.value||this.modal.value||""),this.$set(this,"modal",null)):uni.showToast({title:"地址错误，请检查",icon:"none"})},modalCancel:function(){this.callback.reject(),this.$set(this,"modal",null)},br:function(){uni.showToast({title:"已增加底部间距"}),this.$refs.article["insertHtml"]("<p><br></p>")},edit:function(t){this.$refs.article[t.currentTarget.dataset.method]()},clear:function(){var t=this;uni.showModal({title:"确认",content:"确定清空内容吗？",success:function(e){e.confirm&&t.$refs.article.clear()}})},save:function(){var e=this;uni.showModal({title:"您确定保存文章内容吗？",content:"",success:function(i){if(i.confirm){e.returnValue=e.$refs.article.getContent().replace(/#xskf_/g,"#system_xskf_").replace(/\$/g,"#xskf_qjbl#").replace(/\@/g,"#xskf_zyhs#"),t.log(1,e.returnValue);for(var a=0;a<c.length;a++)e.returnValue=e.returnValue.replace(c[a].new,c[a].old);t.log(2,e.returnValue),uni.navigateBack({delta:1})}}})}}};e.default=r}).call(this,i("5a52")["default"])},d71e:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={mpHtml:i("9df6").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticStyle:{position:"fixed",top:"0",left:"0",display:"flex",width:"100%",height:"100%","flex-direction":"column"}},[a("v-uni-view",{staticClass:"editor_toolbox"},[a("i",{staticClass:"iconfont icon-undo",attrs:{"data-method":"undo"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.edit.apply(void 0,arguments)}}}),a("i",{staticClass:"iconfont icon-redo",attrs:{"data-method":"redo"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.edit.apply(void 0,arguments)}}}),a("i",{staticClass:"iconfont icon-text",attrs:{"data-method":"insertText"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.edit.apply(void 0,arguments)}}}),a("i",{staticClass:"iconfont icon-img",attrs:{"data-method":"insertImg"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.edit.apply(void 0,arguments)}}}),a("i",{staticClass:"iconfont icon-video",attrs:{"data-method":"insertVideo"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.edit.apply(void 0,arguments)}}}),a("i",{staticClass:"iconfont icon-link",attrs:{"data-method":"insertLink"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.edit.apply(void 0,arguments)}}}),a("v-uni-image",{staticStyle:{flex:"1",width:"20px",height:"20px"},attrs:{src:i("a8ff"),mode:"aspectFit"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.br.apply(void 0,arguments)}}}),a("i",{staticClass:"iconfont icon-clear",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}}),a("i",{staticClass:"iconfont icon-save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save.apply(void 0,arguments)}}})],1),t.initialFlag?a("v-uni-view",{staticStyle:{"margin-top":"100rpx",flex:"1",overflow:"auto"}},[a("mp-html",{ref:"article",attrs:{"container-style":"background:#cdcdcd;","lazy-load":!0,content:t.contentChuLi,editable:t.editable}})],1):t._e(),t.modal?[a("v-uni-view",{staticClass:"mask"}),a("v-uni-view",{staticClass:"modal"},[a("v-uni-view",{staticClass:"modal_title"},[t._v(t._s(t.modal.title))]),a("v-uni-input",{staticClass:"modal_input",attrs:{value:t.modal.value,placeholder:"请输入http://或https://开头的网络地址",maxlength:"-1","auto-focus":!0},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.modalInput.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"modal_foot"},[a("v-uni-view",{staticClass:"modal_button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modalCancel.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-view",{staticClass:"modal_button",staticStyle:{color:"#576b95","border-left":"1px solid rgba(0,0,0,.1)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modalConfirm.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)]:t._e()],2)},o=[]}}]);